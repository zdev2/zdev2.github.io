<h1>content-disposition</h1><p><a href="https://npmjs.org/package/content-disposition"><img src="https://img.shields.io/npm/v/content-disposition.svg" alt="NPM Version"></a>
<a href="https://npmjs.org/package/content-disposition"><img src="https://img.shields.io/npm/dm/content-disposition.svg" alt="NPM Downloads"></a>
<a href="https://nodejs.org/en/download"><img src="https://img.shields.io/node/v/content-disposition.svg" alt="Node.js Version"></a>
<a href="https://github.com/jshttp/content-disposition?query=workflow%3Aci"><img src="https://img.shields.io/github/workflow/status/jshttp/content-disposition/ci/master?label=ci" alt="Build Status"></a>
<a href="https://coveralls.io/r/jshttp/content-disposition?branch=master"><img src="https://img.shields.io/coveralls/jshttp/content-disposition.svg" alt="Test Coverage"></a></p>
<p>Create and parse HTTP <code>Content-Disposition</code> header</p>
<h2>Installation</h2><pre><code class="language-sh">$ npm install content-disposition
</code></pre>
<h2>API</h2><pre><code class="language-js">var contentDisposition = require(&#39;content-disposition&#39;)
</code></pre>
<h3>contentDisposition(filename, options)</h3><p>Create an attachment <code>Content-Disposition</code> header value using the given file name,
if supplied. The <code>filename</code> is optional and if no file name is desired, but you
want to specify <code>options</code>, set <code>filename</code> to <code>undefined</code>.</p>
<pre><code class="language-js">res.setHeader(&#39;Content-Disposition&#39;, contentDisposition(&#39;∫ maths.pdf&#39;))
</code></pre>
<p><strong>note</strong> HTTP headers are of the ISO-8859-1 character set. If you are writing this
header through a means different from <code>setHeader</code> in Node.js, you&#39;ll want to specify
the <code>&#39;binary&#39;</code> encoding in Node.js.</p>
<h4>Options</h4><p><code>contentDisposition</code> accepts these properties in the options object.</p>
<h5>fallback</h5><p>If the <code>filename</code> option is outside ISO-8859-1, then the file name is actually
stored in a supplemental field for clients that support Unicode file names and
a ISO-8859-1 version of the file name is automatically generated.</p>
<p>This specifies the ISO-8859-1 file name to override the automatic generation or
disables the generation all together, defaults to <code>true</code>.</p>
<ul>
<li>A string will specify the ISO-8859-1 file name to use in place of automatic
generation.</li>
<li><code>false</code> will disable including a ISO-8859-1 file name and only include the
Unicode version (unless the file name is already ISO-8859-1).</li>
<li><code>true</code> will enable automatic generation if the file name is outside ISO-8859-1.</li>
</ul>
<p>If the <code>filename</code> option is ISO-8859-1 and this option is specified and has a
different value, then the <code>filename</code> option is encoded in the extended field
and this set as the fallback field, even though they are both ISO-8859-1.</p>
<h5>type</h5><p>Specifies the disposition type, defaults to <code>&quot;attachment&quot;</code>. This can also be
<code>&quot;inline&quot;</code>, or any other value (all values except inline are treated like
<code>attachment</code>, but can convey additional information if both parties agree to
it). The type is normalized to lower-case.</p>
<h3>contentDisposition.parse(string)</h3><pre><code class="language-js">var disposition = contentDisposition.parse(&#39;attachment; filename=&quot;EURO rates.txt&quot;; filename*=UTF-8\&#39;\&#39;%e2%82%ac%20rates.txt&#39;)
</code></pre>
<p>Parse a <code>Content-Disposition</code> header string. This automatically handles extended
(&quot;Unicode&quot;) parameters by decoding them and providing them under the standard
parameter name. This will return an object with the following properties (examples
are shown for the string <code>&#39;attachment; filename=&quot;EURO rates.txt&quot;; filename*=UTF-8\&#39;\&#39;%e2%82%ac%20rates.txt&#39;</code>):</p>
<ul>
<li><p><code>type</code>: The disposition type (always lower case). Example: <code>&#39;attachment&#39;</code></p>
</li>
<li><p><code>parameters</code>: An object of the parameters in the disposition (name of parameter
always lower case and extended versions replace non-extended versions). Example:
<code>{filename: &quot;€ rates.txt&quot;}</code></p>
</li>
</ul>
<h2>Examples</h2><h3>Send a file for download</h3><pre><code class="language-js">var contentDisposition = require(&#39;content-disposition&#39;)
var destroy = require(&#39;destroy&#39;)
var fs = require(&#39;fs&#39;)
var http = require(&#39;http&#39;)
var onFinished = require(&#39;on-finished&#39;)

var filePath = &#39;/path/to/public/plans.pdf&#39;

http.createServer(function onRequest (req, res) {
  // set headers
  res.setHeader(&#39;Content-Type&#39;, &#39;application/pdf&#39;)
  res.setHeader(&#39;Content-Disposition&#39;, contentDisposition(filePath))

  // send file
  var stream = fs.createReadStream(filePath)
  stream.pipe(res)
  onFinished(res, function () {
    destroy(stream)
  })
})
</code></pre>
<h2>Testing</h2><pre><code class="language-sh">$ npm test
</code></pre>
<h2>References</h2><ul>
<li><a href="https://tools.ietf.org/html/rfc2616">RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1</a></li>
<li><a href="https://tools.ietf.org/html/rfc5987">RFC 5987: Character Set and Language Encoding for Hypertext Transfer Protocol (HTTP) Header Field Parameters</a></li>
<li><a href="https://tools.ietf.org/html/rfc6266">RFC 6266: Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)</a></li>
<li><a href="http://greenbytes.de/tech/tc2231/">Test Cases for HTTP Content-Disposition header field (RFC 6266) and the Encodings defined in RFCs 2047, 2231 and 5987</a></li>
</ul>
<h2>License</h2><p><a href="LICENSE">MIT</a></p>
