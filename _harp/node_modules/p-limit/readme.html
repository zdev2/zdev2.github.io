<h1>p-limit <a href="https://travis-ci.org/sindresorhus/p-limit"><img src="https://travis-ci.org/sindresorhus/p-limit.svg?branch=master" alt="Build Status"></a></h1><blockquote>
<p>Run multiple promise-returning &amp; async functions with limited concurrency</p>
</blockquote>
<h2>Install</h2><pre><code>$ npm install p-limit
</code></pre>
<h2>Usage</h2><pre><code class="language-js">const pLimit = require(&#39;p-limit&#39;);

const limit = pLimit(1);

const input = [
    limit(() =&gt; fetchSomething(&#39;foo&#39;)),
    limit(() =&gt; fetchSomething(&#39;bar&#39;)),
    limit(() =&gt; doSomething())
];

(async () =&gt; {
    // Only one promise is run at once
    const result = await Promise.all(input);
    console.log(result);
})();
</code></pre>
<h2>API</h2><h3>pLimit(concurrency)</h3><p>Returns a <code>limit</code> function.</p>
<h4>concurrency</h4><p>Type: <code>number</code><br>Minimum: <code>1</code><br>Default: <code>Infinity</code></p>
<p>Concurrency limit.</p>
<h3>limit(fn, ...args)</h3><p>Returns the promise returned by calling <code>fn(...args)</code>.</p>
<h4>fn</h4><p>Type: <code>Function</code></p>
<p>Promise-returning/async function.</p>
<h4>args</h4><p>Any arguments to pass through to <code>fn</code>.</p>
<p>Support for passing arguments on to the <code>fn</code> is provided in order to be able to avoid creating unnecessary closures. You probably don&#39;t need this optimization unless you&#39;re pushing a <em>lot</em> of functions.</p>
<h3>limit.activeCount</h3><p>The number of promises that are currently running.</p>
<h3>limit.pendingCount</h3><p>The number of promises that are waiting to run (i.e. their internal <code>fn</code> was not called yet).</p>
<h3>limit.clearQueue()</h3><p>Discard pending promises that are waiting to run.</p>
<p>This might be useful if you want to teardown the queue at the end of your program&#39;s lifecycle or discard any function calls referencing an intermediary state of your app.</p>
<p>Note: This does not cancel promises that are already running.</p>
<h2>FAQ</h2><h3>How is this different from the <a href="https://github.com/sindresorhus/p-queue"><code>p-queue</code></a> package?</h3><p>This package is only about limiting the number of concurrent executions, while <code>p-queue</code> is a fully featured queue implementation with lots of different options, introspection, and ability to pause the queue.</p>
<h2>Related</h2><ul>
<li><a href="https://github.com/sindresorhus/p-queue">p-queue</a> - Promise queue with concurrency control</li>
<li><a href="https://github.com/sindresorhus/p-throttle">p-throttle</a> - Throttle promise-returning &amp; async functions</li>
<li><a href="https://github.com/sindresorhus/p-debounce">p-debounce</a> - Debounce promise-returning &amp; async functions</li>
<li><a href="https://github.com/sindresorhus/p-all">p-all</a> - Run promise-returning &amp; async functions concurrently with optional limited concurrency</li>
<li><a href="https://github.com/sindresorhus/promise-fun">Moreâ€¦</a></li>
</ul>
<hr>
<div align="center">
    <b>
        <a href="https://tidelift.com/subscription/pkg/npm-p-limit?utm_source=npm-p-limit&utm_medium=referral&utm_campaign=readme">Get professional support for this package with a Tidelift subscription</a>
    </b>
    <br>
    <sub>
        Tidelift helps make open source sustainable for maintainers while giving companies<br>assurances about security, maintenance, and licensing for their dependencies.
    </sub>
</div>
